{"ast":null,"code":"import { __assign, __extends } from \"tslib\";\nimport * as React from 'react';\nimport { anchorProperties, getNativeProps, memoizeFunction, getId, mergeAriaAttributeValues } from '../../../Utilities';\nimport { ContextualMenuItemWrapper } from './ContextualMenuItemWrapper';\nimport { KeytipData } from '../../../KeytipData';\nimport { isItemDisabled, hasSubmenu } from '../../../utilities/contextualMenu/index';\nimport { ContextualMenuItem } from '../ContextualMenuItem';\n\nvar ContextualMenuAnchor =\n/** @class */\nfunction (_super) {\n  __extends(ContextualMenuAnchor, _super);\n\n  function ContextualMenuAnchor() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this._anchor = React.createRef();\n    _this._getMemoizedMenuButtonKeytipProps = memoizeFunction(function (keytipProps) {\n      return __assign(__assign({}, keytipProps), {\n        hasMenu: true\n      });\n    });\n\n    _this._getSubmenuTarget = function () {\n      return _this._anchor.current ? _this._anchor.current : undefined;\n    };\n\n    _this._onItemClick = function (ev) {\n      var _a = _this.props,\n          item = _a.item,\n          onItemClick = _a.onItemClick;\n\n      if (onItemClick) {\n        onItemClick(item, ev);\n      }\n    };\n\n    _this._renderAriaDescription = function (ariaDescription, className) {\n      // If ariaDescription is given, descriptionId will be assigned to ariaDescriptionSpan\n      return ariaDescription ? React.createElement(\"span\", {\n        id: _this._ariaDescriptionId,\n        className: className\n      }, ariaDescription) : null;\n    };\n\n    return _this;\n  }\n\n  ContextualMenuAnchor.prototype.render = function () {\n    var _this = this;\n\n    var _a = this.props,\n        item = _a.item,\n        classNames = _a.classNames,\n        index = _a.index,\n        focusableElementIndex = _a.focusableElementIndex,\n        totalItemCount = _a.totalItemCount,\n        hasCheckmarks = _a.hasCheckmarks,\n        hasIcons = _a.hasIcons,\n        _b = _a.contextualMenuItemAs,\n        ChildrenRenderer = _b === void 0 ? ContextualMenuItem : _b,\n        expandedMenuItemKey = _a.expandedMenuItemKey,\n        onItemClick = _a.onItemClick,\n        openSubMenu = _a.openSubMenu,\n        dismissSubMenu = _a.dismissSubMenu,\n        dismissMenu = _a.dismissMenu;\n    var anchorRel = item.rel;\n\n    if (item.target && item.target.toLowerCase() === '_blank') {\n      anchorRel = anchorRel ? anchorRel : 'nofollow noopener noreferrer'; // Safe default to prevent tabjacking\n    }\n\n    var itemHasSubmenu = hasSubmenu(item);\n    var nativeProps = getNativeProps(item, anchorProperties);\n    var disabled = isItemDisabled(item);\n    var itemProps = item.itemProps,\n        ariaDescription = item.ariaDescription;\n    var keytipProps = item.keytipProps;\n\n    if (keytipProps && itemHasSubmenu) {\n      keytipProps = this._getMemoizedMenuButtonKeytipProps(keytipProps);\n    } // Check for ariaDescription to set the _ariaDescriptionId and render a hidden span with\n    // the description in it to be added to ariaDescribedBy\n\n\n    if (ariaDescription) {\n      this._ariaDescriptionId = getId();\n    }\n\n    var ariaDescribedByIds = mergeAriaAttributeValues(item.ariaDescribedBy, ariaDescription ? this._ariaDescriptionId : undefined, nativeProps['aria-describedby']);\n    var additionalItemProperties = {\n      'aria-describedby': ariaDescribedByIds\n    };\n    return React.createElement(\"div\", null, React.createElement(KeytipData, {\n      keytipProps: item.keytipProps,\n      ariaDescribedBy: ariaDescribedByIds,\n      disabled: disabled\n    }, function (keytipAttributes) {\n      return React.createElement(\"a\", __assign({}, additionalItemProperties, nativeProps, keytipAttributes, {\n        ref: _this._anchor,\n        href: item.href,\n        target: item.target,\n        rel: anchorRel,\n        className: classNames.root,\n        role: \"menuitem\",\n        \"aria-haspopup\": itemHasSubmenu || undefined,\n        \"aria-expanded\": itemHasSubmenu ? item.key === expandedMenuItemKey : undefined,\n        \"aria-posinset\": focusableElementIndex + 1,\n        \"aria-setsize\": totalItemCount,\n        \"aria-disabled\": isItemDisabled(item),\n        // eslint-disable-next-line deprecation/deprecation\n        style: item.style,\n        onClick: _this._onItemClick,\n        onMouseEnter: _this._onItemMouseEnter,\n        onMouseLeave: _this._onItemMouseLeave,\n        onMouseMove: _this._onItemMouseMove,\n        onKeyDown: itemHasSubmenu ? _this._onItemKeyDown : undefined\n      }), React.createElement(ChildrenRenderer, __assign({\n        componentRef: item.componentRef,\n        item: item,\n        classNames: classNames,\n        index: index,\n        onCheckmarkClick: hasCheckmarks && onItemClick ? onItemClick : undefined,\n        hasIcons: hasIcons,\n        openSubMenu: openSubMenu,\n        dismissSubMenu: dismissSubMenu,\n        dismissMenu: dismissMenu,\n        getSubmenuTarget: _this._getSubmenuTarget\n      }, itemProps)), _this._renderAriaDescription(ariaDescription, classNames.screenReaderText));\n    }));\n  };\n\n  return ContextualMenuAnchor;\n}(ContextualMenuItemWrapper);\n\nexport { ContextualMenuAnchor };","map":{"version":3,"sources":["components/ContextualMenu/ContextualMenuItemWrapper/ContextualMenuAnchor.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { anchorProperties, getNativeProps, memoizeFunction, getId, mergeAriaAttributeValues } from '../../../Utilities';\nimport { ContextualMenuItemWrapper } from './ContextualMenuItemWrapper';\nimport { KeytipData } from '../../../KeytipData';\nimport { isItemDisabled, hasSubmenu } from '../../../utilities/contextualMenu/index';\nimport { ContextualMenuItem } from '../ContextualMenuItem';\nimport { IKeytipDataProps } from '../../../KeytipData';\nimport { IKeytipProps } from '../../../Keytip';\n\nexport class ContextualMenuAnchor extends ContextualMenuItemWrapper {\n  private _anchor = React.createRef<HTMLAnchorElement>();\n  private _ariaDescriptionId: string;\n\n  private _getMemoizedMenuButtonKeytipProps = memoizeFunction((keytipProps: IKeytipProps) => {\n    return {\n      ...keytipProps,\n      hasMenu: true,\n    };\n  });\n\n  public render() {\n    const {\n      item,\n      classNames,\n      index,\n      focusableElementIndex,\n      totalItemCount,\n      hasCheckmarks,\n      hasIcons,\n      contextualMenuItemAs: ChildrenRenderer = ContextualMenuItem,\n      expandedMenuItemKey,\n      onItemClick,\n      openSubMenu,\n      dismissSubMenu,\n      dismissMenu,\n    } = this.props;\n\n    let anchorRel = item.rel;\n    if (item.target && item.target.toLowerCase() === '_blank') {\n      anchorRel = anchorRel ? anchorRel : 'nofollow noopener noreferrer'; // Safe default to prevent tabjacking\n    }\n\n    const itemHasSubmenu = hasSubmenu(item);\n    const nativeProps = getNativeProps<React.HTMLAttributes<HTMLAnchorElement>>(item, anchorProperties);\n    const disabled = isItemDisabled(item);\n    const { itemProps, ariaDescription } = item;\n\n    let { keytipProps } = item;\n    if (keytipProps && itemHasSubmenu) {\n      keytipProps = this._getMemoizedMenuButtonKeytipProps(keytipProps);\n    }\n\n    // Check for ariaDescription to set the _ariaDescriptionId and render a hidden span with\n    // the description in it to be added to ariaDescribedBy\n    if (ariaDescription) {\n      this._ariaDescriptionId = getId();\n    }\n    const ariaDescribedByIds = mergeAriaAttributeValues(\n      item.ariaDescribedBy,\n      ariaDescription ? this._ariaDescriptionId : undefined,\n      nativeProps['aria-describedby'],\n    );\n\n    const additionalItemProperties = {\n      'aria-describedby': ariaDescribedByIds,\n    };\n\n    return (\n      <div>\n        <KeytipData keytipProps={item.keytipProps} ariaDescribedBy={ariaDescribedByIds} disabled={disabled}>\n          {(keytipAttributes: IKeytipDataProps): JSX.Element => (\n            <a\n              {...additionalItemProperties}\n              {...nativeProps}\n              {...keytipAttributes}\n              ref={this._anchor}\n              href={item.href}\n              target={item.target}\n              rel={anchorRel}\n              className={classNames.root}\n              role=\"menuitem\"\n              aria-haspopup={itemHasSubmenu || undefined}\n              aria-expanded={itemHasSubmenu ? item.key === expandedMenuItemKey : undefined}\n              aria-posinset={focusableElementIndex + 1}\n              aria-setsize={totalItemCount}\n              aria-disabled={isItemDisabled(item)}\n              // eslint-disable-next-line deprecation/deprecation\n              style={item.style}\n              onClick={this._onItemClick}\n              onMouseEnter={this._onItemMouseEnter}\n              onMouseLeave={this._onItemMouseLeave}\n              onMouseMove={this._onItemMouseMove}\n              onKeyDown={itemHasSubmenu ? this._onItemKeyDown : undefined}\n            >\n              <ChildrenRenderer\n                componentRef={item.componentRef}\n                item={item}\n                classNames={classNames}\n                index={index}\n                onCheckmarkClick={hasCheckmarks && onItemClick ? onItemClick : undefined}\n                hasIcons={hasIcons}\n                openSubMenu={openSubMenu}\n                dismissSubMenu={dismissSubMenu}\n                dismissMenu={dismissMenu}\n                getSubmenuTarget={this._getSubmenuTarget}\n                {...itemProps}\n              />\n              {this._renderAriaDescription(ariaDescription, classNames.screenReaderText)}\n            </a>\n          )}\n        </KeytipData>\n      </div>\n    );\n  }\n\n  protected _getSubmenuTarget = (): HTMLElement | undefined => {\n    return this._anchor.current ? this._anchor.current : undefined;\n  };\n\n  protected _onItemClick = (ev: React.MouseEvent<HTMLElement>): void => {\n    const { item, onItemClick } = this.props;\n    if (onItemClick) {\n      onItemClick(item, ev);\n    }\n  };\n\n  protected _renderAriaDescription = (ariaDescription?: string, className?: string) => {\n    // If ariaDescription is given, descriptionId will be assigned to ariaDescriptionSpan\n    return ariaDescription ? (\n      <span id={this._ariaDescriptionId} className={className}>\n        {ariaDescription}\n      </span>\n    ) : null;\n  };\n}\n"],"sourceRoot":"../src/"},"metadata":{},"sourceType":"module"}