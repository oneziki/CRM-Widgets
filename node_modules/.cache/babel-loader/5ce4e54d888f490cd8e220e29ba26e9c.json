{"ast":null,"code":"import { getWindow } from '@fluentui/utilities';\n/**\n * Wrapper for ResizeObserver, with fallback for browsers that don't support ResizeObserver.\n *\n * Calls the onResize callback once layout is complete, and again whenever any of the target(s) change size.\n * Or if ResizeObserver isn't supported, calls the callback whenever the window changes size.\n *\n * @param target - Either a single element, or array of elements to watch for size changes.\n * @param onResize - Callback to be notified when layout is complete, and when the target(s) change size.\n *    If this browser supports ResizeObserver, the callback will be passed the ResizeObserverEntry[] array.\n *    Otherwise, the entries array will be undefined, and you'll need to find another way to get the element's size,\n *    (e.g. clientWidth/clientHeight or getBoundingClientRect).\n *\n * @returns A function to clean up the observer/listener.\n */\n\nexport var observeResize = function (target, onResize) {\n  if (typeof ResizeObserver !== 'undefined') {\n    var observer_1 = new ResizeObserver(onResize);\n\n    if (Array.isArray(target)) {\n      target.forEach(function (t) {\n        return observer_1.observe(t);\n      });\n    } else {\n      observer_1.observe(target);\n    }\n\n    return function () {\n      return observer_1.disconnect();\n    };\n  } else {\n    // Fallback for browsers that don't support ResizeObserver\n    var onResizeWrapper_1 = function () {\n      return onResize(undefined);\n    };\n\n    var win_1 = getWindow(Array.isArray(target) ? target[0] : target);\n\n    if (!win_1) {\n      // Can't listen for resize if we can't get the window object\n      return function () {// Nothing to clean up\n      };\n    } // Listen for the first animation frame, which will happen after layout is complete\n\n\n    var animationFrameId_1 = win_1.requestAnimationFrame(onResizeWrapper_1);\n    win_1.addEventListener('resize', onResizeWrapper_1, false);\n    return function () {\n      win_1.cancelAnimationFrame(animationFrameId_1);\n      win_1.removeEventListener('resize', onResizeWrapper_1, false);\n    };\n  }\n};","map":{"version":3,"sources":["utilities/observeResize.ts"],"names":[],"mappings":"AAAA,SAAS,SAAT,QAA0B,qBAA1B;AAEA;;;;;;;;;;;;;AAaG;;AACH,OAAO,IAAM,aAAa,GAAG,UAC3B,MAD2B,EAE3B,QAF2B,EAE4C;AAEvE,MAAI,OAAO,cAAP,KAA0B,WAA9B,EAA2C;AACzC,QAAM,UAAQ,GAAG,IAAI,cAAJ,CAAmB,QAAnB,CAAjB;;AAEA,QAAI,KAAK,CAAC,OAAN,CAAc,MAAd,CAAJ,EAA2B;AACzB,MAAA,MAAM,CAAC,OAAP,CAAe,UAAA,CAAA,EAAC;AAAI,eAAA,UAAQ,CAAC,OAAT,CAAA,CAAA,CAAA;AAAmB,OAAvC;AACD,KAFD,MAEO;AACL,MAAA,UAAQ,CAAC,OAAT,CAAiB,MAAjB;AACD;;AAED,WAAO,YAAA;AAAM,aAAA,UAAQ,CAAR,UAAA,EAAA;AAAqB,KAAlC;AACD,GAVD,MAUO;AACL;AACA,QAAM,iBAAe,GAAG,YAAA;AAAM,aAAA,QAAQ,CAAR,SAAQ,CAAR;AAAmB,KAAjD;;AAEA,QAAM,KAAG,GAAG,SAAS,CAAC,KAAK,CAAC,OAAN,CAAc,MAAd,IAAwB,MAAM,CAAC,CAAD,CAA9B,GAAoC,MAArC,CAArB;;AACA,QAAI,CAAC,KAAL,EAAU;AACR;AACA,aAAO,YAAA,CACL;AACD,OAFD;AAGD,KAVI,CAYL;;;AACA,QAAM,kBAAgB,GAAG,KAAG,CAAC,qBAAJ,CAA0B,iBAA1B,CAAzB;AACA,IAAA,KAAG,CAAC,gBAAJ,CAAqB,QAArB,EAA+B,iBAA/B,EAAgD,KAAhD;AAEA,WAAO,YAAA;AACL,MAAA,KAAG,CAAC,oBAAJ,CAAyB,kBAAzB;AACA,MAAA,KAAG,CAAC,mBAAJ,CAAwB,QAAxB,EAAkC,iBAAlC,EAAmD,KAAnD;AACD,KAHD;AAID;AACF,CAnCM","sourcesContent":["import { getWindow } from '@fluentui/utilities';\n\n/**\n * Wrapper for ResizeObserver, with fallback for browsers that don't support ResizeObserver.\n *\n * Calls the onResize callback once layout is complete, and again whenever any of the target(s) change size.\n * Or if ResizeObserver isn't supported, calls the callback whenever the window changes size.\n *\n * @param target - Either a single element, or array of elements to watch for size changes.\n * @param onResize - Callback to be notified when layout is complete, and when the target(s) change size.\n *    If this browser supports ResizeObserver, the callback will be passed the ResizeObserverEntry[] array.\n *    Otherwise, the entries array will be undefined, and you'll need to find another way to get the element's size,\n *    (e.g. clientWidth/clientHeight or getBoundingClientRect).\n *\n * @returns A function to clean up the observer/listener.\n */\nexport const observeResize = (\n  target: Element | Element[],\n  onResize: (entries: readonly ResizeObserverEntry[] | undefined) => void,\n): (() => void) => {\n  if (typeof ResizeObserver !== 'undefined') {\n    const observer = new ResizeObserver(onResize);\n\n    if (Array.isArray(target)) {\n      target.forEach(t => observer.observe(t));\n    } else {\n      observer.observe(target);\n    }\n\n    return () => observer.disconnect();\n  } else {\n    // Fallback for browsers that don't support ResizeObserver\n    const onResizeWrapper = () => onResize(undefined);\n\n    const win = getWindow(Array.isArray(target) ? target[0] : target);\n    if (!win) {\n      // Can't listen for resize if we can't get the window object\n      return () => {\n        // Nothing to clean up\n      };\n    }\n\n    // Listen for the first animation frame, which will happen after layout is complete\n    const animationFrameId = win.requestAnimationFrame(onResizeWrapper);\n    win.addEventListener('resize', onResizeWrapper, false);\n\n    return () => {\n      win.cancelAnimationFrame(animationFrameId);\n      win.removeEventListener('resize', onResizeWrapper, false);\n    };\n  }\n};\n\n/** Temporary type definition for ResizeObserver. Can be removed when official types are available. */\ntype ResizeObserver = {\n  new (callback: (entries: readonly ResizeObserverEntry[], observer: ResizeObserver) => void): ResizeObserver;\n  observe(target: Element, options?: { box: 'content-box' | 'border-box' }): void;\n  unobserve(target: Element): void;\n  disconnect(): void;\n};\n\n/** Temporary type definition for ResizeObserverEntry. Can be removed when official types are available. */\ntype ResizeObserverEntry = {\n  readonly contentRect: DOMRectReadOnly;\n  readonly target: Element;\n};\n\n/** Temporary definition for ResizeObserver. Can be removed when official types are available. */\ndeclare const ResizeObserver: ResizeObserver | undefined;\n"],"sourceRoot":"../src/"},"metadata":{},"sourceType":"module"}